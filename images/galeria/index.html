<!DOCTYPE html><html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Galería</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/css/lightgallery-bundle.min.css">
<style>
  body{font-family:system-ui,Arial,sans-serif;max-width:1000px;margin:2rem auto;padding:0 1rem}
  h1{margin-bottom:.25rem}
  .back{margin:.25rem 0 1rem}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
  .grid img{width:100%;height:170px;object-fit:cover;border-radius:10px}
  a{color:#004080;text-decoration:none}
</style>
</head><body>
<h1>Galería</h1>
<p class="back"><a href="/">← Volver al inicio</a></p>

<div id="galeria" class="grid"></div>

<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/lightgallery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/zoom/lg-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/thumbnail/lg-thumbnail.min.js"></script>
<script>
  // Intenta .jpg, .jpeg, .png y solo agrega las que cargan
  const NUM_FOTOS = 30;              // pon un tope alto si no sabes cuántas son
  const PREFIJO   = 'foto';          // cambia si tus archivos se llaman distinto
  const EXT       = ['jpg','jpeg','png'];

  const g = document.getElementById('galeria');

  function testSrc(src){
    return new Promise(ok=>{
      const im = new Image();
      im.onload = ()=> ok(src);
      im.onerror = ()=> ok(null);
      im.src = src;
    });
  }

  async function build(){
    const found = [];
    for(let i=1;i<=NUM_FOTOS;i++){
      for(const e of EXT){
        const src = `${PREFIJO}${i}.${e}`;
        /* si existe, lo guardamos y pasamos al siguiente i */
        // eslint-disable-next-line no-await-in-loop
        const ok = await testSrc(src);
        if(ok){ found.push(ok); break; }
      }
    }
    if(found.length===0){
      g.innerHTML = '<p>No se encontraron imágenes. Revisa nombres/extensiones.</p>';
      return;
    }
    g.innerHTML = found.map((f,i)=>`
      <a href="${f}" data-sub-html="Actividad ${i+1}">
        <img src="${f}" alt="Actividad ${i+1}">
      </a>`).join('');

    lightGallery(g, { selector:'a', plugins:[lgZoom, lgThumbnail], speed:300 });
  }
  build();
</script>
</body></html>
