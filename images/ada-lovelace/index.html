<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Galería Ada Lovelace Medellín 2025</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/css/lightgallery-bundle.min.css">

<style>
  body{
    font-family:system-ui,Arial,sans-serif;
    max-width:1000px;margin:2rem auto;padding:0 1rem;background:#fafafa;
  }
  h1{color:#5c308c;margin-bottom:.25rem;text-align:center}
  .back{margin:.25rem 0 1rem;text-align:center}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
  .grid img{width:100%;height:170px;object-fit:cover;border-radius:10px}
  a{color:#5c308c;text-decoration:none}
</style>
</head>
<body>
<h1>Galería Ada Lovelace Medellín 2025</h1>
<p class="back"><a href="/">← Volver al inicio</a></p>

<div id="galeria" class="grid"></div>

<!-- UMD correctos -->
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/lightgallery.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/zoom/lg-zoom.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/thumbnail/lg-thumbnail.umd.min.js"></script>

<script>
  // === Configuración para /images/ada-lovelace/index.html ===
  const DIR       = './';       // MISMA carpeta del HTML
  const PREFIJO   = 'ADA';      // ADA1, ADA2, ...
  const NUM_FOTOS = 60;         // ajusta si quieres
  const EXT       = ['jpeg','jpg','JPG','JPEG'];
  const PAD2      = false;      // sin ceros a la izquierda
  // ==========================================================

  const g = document.getElementById('galeria');

  function testSrc(src){
    return new Promise(ok=>{
      const im = new Image();
      im.onload  = ()=> ok(src);
      im.onerror = ()=> ok(null);
      im.src = src;
    });
  }

  function candidates(i){
    const bases = [DIR]; // solo la carpeta actual
    const nombres = PAD2
      ? [`${PREFIJO}${String(i).padStart(2,'0')}`, `${PREFIJO}${i}`]
      : [`${PREFIJO}${i}`];

    const cands = [];
    for(const b of bases){
      for(const n of nombres){
        for(const e of EXT){
          cands.push(`${b}${n}.${e}`);
        }
      }
    }
    return cands;
  }

  async function build(){
    const found = [];
    for(let i=1;i<=NUM_FOTOS;i++){
      let hit = null;
      for(const src of candidates(i)){
        // eslint-disable-next-line no-await-in-loop
        const ok = await testSrc(src);
        if(ok){ hit = ok; break; }
      }
      if(hit) found.push(hit);
    }

    if(found.length===0){
      g.innerHTML = '<p>No se encontraron imágenes. Asegúrate de que <code>ADA1.jpeg</code>, <code>ADA2.jpeg</code>, ... estén en <code>/images/ada-lovelace/</code> junto a este <code>index.html</code>.</p>';
      return;
    }

    g.innerHTML = found.map((f,i)=>`
      <a href="${f}" data-sub-html="Ada Lovelace ${i+1}">
        <img src="${f}" alt="Ada Lovelace ${i+1}">
      </a>`).join('');

    lightGallery(g,{
      selector:'a',
      plugins:[lgZoom,lgThumbnail],
      speed:300
    });
  }

  if(document.readyState==='loading'){
    document.addEventListener('DOMContentLoaded', build);
  } else {
    build();
  }
</script>
</body>
</html>
