<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Galería Ada Lovelace Medellín 2025</title>

<!-- Estilos de lightGallery -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/css/lightgallery-bundle.min.css">

<style>
  body{
    font-family:system-ui,Arial,sans-serif;
    max-width:1000px;margin:2rem auto;padding:0 1rem;background:#fafafa;
  }
  h1{color:#5c308c;margin-bottom:.25rem}
  .back{margin:.25rem 0 1rem}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
  .grid img{width:100%;height:170px;object-fit:cover;border-radius:10px}
  a{color:#5c308c;text-decoration:none}
</style>
</head>
<body>
<h1>Galería Ada Lovelace Medellín 2025</h1>
<p class="back"><a href="/">← Volver al inicio</a></p>

<div id="galeria" class="grid"></div>

<!-- JS UMD correctos -->
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/lightgallery.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/zoom/lg-zoom.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/thumbnail/lg-thumbnail.umd.min.js"></script>

<script>
  // === Configuración ===
  const DIR      = './';        // pon 'img/', 'fotos/', etc. si tus archivos están en carpeta
  const PREFIJO  = 'ada';       // cambia si tus fotos se llaman distinto
  const NUM_FOTOS= 40;          // máximo a intentar
  const EXT      = ['jpg','jpeg','png','JPG','JPEG','PNG']; // prueba también mayúsculas
  const PAD2     = true;        // si usas ada01, ada02... en vez de ada1, ada2...
  // ======================

  const g = document.getElementById('galeria');

  function testSrc(src){
    return new Promise(ok=>{
      const im = new Image();
      im.onload = ()=> ok(src);
      im.onerror = ()=> ok(null);
      im.src = src;
    });
  }

  // genera variantes de nombre: ada1, ada01
  function candidates(i){
    const base = PAD2 ? [`${PREFIJO}${String(i).padStart(2,'0')}`, `${PREFIJO}${i}`]
                      : [`${PREFIJO}${i}`];
    const cands = [];
    for(const b of base){
      for(const e of EXT){
        cands.push(`${DIR}${b}.${e}`);
      }
    }
    return cands;
  }

  async function build(){
    const found = [];
    for(let i=1;i<=NUM_FOTOS;i++){
      const tries = candidates(i);
      let hit = null;
      for(const src of tries){
        /* eslint-disable no-await-in-loop */
        const ok = await testSrc(src);
        if(ok){ hit = ok; break; }
      }
      if(hit) found.push(hit);
    }

    if(found.length===0){
      g.innerHTML = '<p>No se encontraron imágenes. Revisa carpeta, nombres (con/ sin 0) y extensión.</p>';
      console.warn('Sugerencias: ajusta DIR, PREFIJO, PAD2 o EXT.');
      return;
    }

    g.innerHTML = found.map((f,i)=>`
      <a href="${f}" data-sub-html="Ada Lovelace ${i+1}">
        <img src="${f}" alt="Ada Lovelace ${i+1}">
      </a>`).join('');

    // Inicializar lightGallery (UMD globals existen: lightGallery, lgZoom, lgThumbnail)
    lightGallery(g, {
      selector: 'a',
      plugins: [lgZoom, lgThumbnail],
      speed: 300
    });
  }

  // Espera al DOM por si mueves el script al <head>
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', build);
  } else {
    build();
  }
</script>
</body>
</html>
